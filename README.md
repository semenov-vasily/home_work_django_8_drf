# Домашнее задание "Django REST framework: Тестирование Django-приложений с использованием Pytest"


## Порядок работы

- Установить зависимости 
```bash
pip install -r requirements.txt
```
- Создать базу в postgres и прогнать миграции
```base
python manage.py migrate
```
- Для запуска тестов выполнить команду:

```bash
pytest
```
```commandline
tests\students\test_courses_api.py .......                        [100%]
================================== 7 passed in 0.67s ===================
(.venv) PS C:\Users\User\PycharmProjects\home_work_django_8_drf>
```
- Для проверки покрытия тестами выполнить команду:
```bash
pytest --cov=.
```
```
---------- coverage: platform win32, python 3.12.0-final-0 -----------
Name                                             Stmts   Miss  Cover
--------------------------------------------------------------------
students\__init__.py                                 0      0   100%
students\admin.py                                    1      0   100%
students\apps.py                                     3      0   100%
students\filters.py                                  7      0   100%
students\migrations\0001_initial.py                  5      0   100%
students\migrations\0002_auto_20201101_2359.py       4      0   100%
students\migrations\__init__.py                      0      0   100%
students\models.py                                   7      0   100%
students\serializers.py                              6      0   100%
students\views.py                                   10      0   100%
--------------------------------------------------------------------
TOTAL                                               43      0   100%
```
## Описание

Есть бэкенд простого приложения с курсами и списком студентов. Вся логика для бэкенда уже есть в заготовке, но совершенно нет тестов.

## Что нужно сделать

Вам необходимо написать тесты для текущей логики приложения.

Заведите фикстуры:

- для api-client,
- для фабрики курсов,
- для фабрики студентов.

В качестве библиотеки для фабрик используйте `model_bakery` (https://github.com/model-bakers/model_bakery).

Добавьте следующие тест-кейсы:

- проверка получения первого курса (retrieve-логика):
  - создаем курс через фабрику;
  - строим урл и делаем запрос через тестовый клиент;
  - проверяем, что вернулся именно тот курс, который запрашивали;
- проверка получения списка курсов (list-логика):
  - аналогично — сначала вызываем фабрики, затем делаем запрос и проверяем результат;
- проверка фильтрации списка курсов по `id`:
  - создаем курсы через фабрику, передать ID одного курса в фильтр, проверить результат запроса с фильтром;
- проверка фильтрации списка курсов по `name`;
- тест успешного создания курса:
  - здесь фабрика не нужна, готовим JSON-данные и создаём курс;
- тест успешного обновления курса:
  - сначала через фабрику создаём, потом обновляем JSON-данными;
- тест успешного удаления курса.

Все тесты должны явно проверять код возврата.

Не забывайте использовать декоратор `@pytest.mark.django_db`, чтобы тесты использовали базу.


## Подсказки

- `APIClient` в DRF является расширением Джанговского `Client`. Для того, чтобы передать GET-параметры в запросе, используйте аргумент `data`: https://docs.djangoproject.com/en/3.1/topics/testing/tools/#django.test.Client.get.

## Документация

pytest: https://docs.pytest.org/en/stable/

pytest-django: https://pytest-django.readthedocs.io/en/latest/

тестирование DRF: https://www.django-rest-framework.org/api-guide/testing/


